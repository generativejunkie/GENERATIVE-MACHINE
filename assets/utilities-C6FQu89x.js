import{g as A}from"./index-CZI3Mu21.js";const _=(h,p=4294967295,e=79764919)=>{const t=new Int32Array(256);let H,s,i,n=p;for(H=0;H<256;H++){for(i=H<<24,s=8;s>0;--s)i=2147483648&i?i<<1^e:i<<1;t[H]=i}for(H=0;H<h.length;H++)n=n<<8^t[255&(n>>24^h[H])];return n},b=(h,p=_)=>{const e=r=>new Uint8Array(r.length/2).map((I,g)=>parseInt(r.substring(2*g,2*(g+1)),16)),t=r=>e(r)[0],H=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach((r,I)=>H.set(r,I));const s=new Uint8Array(h.length);let i,n,l,c=!1,d=0,o=42,f=h.length>13&&h.substring(0,9)==="dynEncode",u=0;f&&(u=11,n=t(h.substring(9,u)),n<=1&&(u+=2,o=t(h.substring(11,u))),n===1&&(u+=8,l=(r=>new DataView(e(r).buffer).getInt32(0,!0))(h.substring(13,u))));const P=256-o;for(let r=u;r<h.length;r++)if(i=h.charCodeAt(r),i!==61||c){if(i===92&&r<h.length-5&&f){const I=h.charCodeAt(r+1);I!==117&&I!==85||(i=parseInt(h.substring(r+2,r+6),16),r+=5)}if(i>255){const I=H.get(i);I&&(i=I+127)}c&&(c=!1,i-=64),s[d++]=i<o&&i>0?i+P:i-o}else c=!0;const m=s.subarray(0,d);if(f&&n===1){const r=p(m);if(r!==l){const I="Decode failed crc32 validation";throw console.error("`simple-yenc`\n",I+`
`,"Expected: "+l+"; Got: "+r+`
`,"Visit https://github.com/eshaz/simple-yenc for more information"),Error(I)}}return m};function a(){const h=Uint8Array,p=Float32Array;a.modules||Object.defineProperties(a,{modules:{value:new WeakMap},setModule:{value(e,t){a.modules.set(e,Promise.resolve(t))}},getModule:{value(e,t){let H=a.modules.get(e);return H||(t?H=WebAssembly.compile(b(t)):(t=e.wasm,H=a.inflateDynEncodeString(t).then(s=>WebAssembly.compile(s))),a.modules.set(e,H)),H}},concatFloat32:{value(e,t){let H=new p(t),s=0,i=0;for(;s<e.length;)H.set(e[s],i),i+=e[s++].length;return H}},getDecodedAudio:{value:(e,t,H,s,i)=>({errors:e,channelData:t,samplesDecoded:H,sampleRate:s,bitDepth:i})},getDecodedAudioMultiChannel:{value(e,t,H,s,i,n){let l=[],c,d;for(c=0;c<H;c++){const o=[];for(d=0;d<t.length;)o.push(t[d++][c]||[]);l.push(a.concatFloat32(o,s))}return a.getDecodedAudio(e,l,s,i,n)}},inflateDynEncodeString:{value(e){return e=b(e),new Promise(t=>{const H=String.raw`dynEncode012804c7886d()((()>+*§§)§,§§§§)§+§§§)§+.-()(*)-+)(.7*§)i¸¸,3§(i¸¸,3/G+.¡*(,(,3+)2å:-),§H(P*DI*H(P*@I++hH)H*r,hH(H(P*<J,i)^*<H,H(P*4U((I-H(H*i0J,^*DH+H-H*I+H,I*4)33H(H*H)^*DH(H+H)^*@H+i§H)i§3æ*).§K(iHI/+§H,iHn,§H+i(H+i(rCJ0I,H*I-+hH,,hH(H-V)(i)J.H.W)(i)c)(H,i)I,H-i*I-4)33i(I.*hH(V)(H+n5(H(i*I-i(I,i)I.+hH,i*J+iHn,hi(I-i*I,+hH,H/H-c)(H,iFn,hi(I,+hH,H0n5-H*V)(J(,hH/H(i)J(H(V)(J(i)c)(H)H(i)H,c)(3H*i*I*H,i)I,4(3(-H(H,W)(H-I-H,i*I,4)3(3(3H,H-I1H+I,H.i)H1V)(J.i(v5(33H.-H(H,i(c)(H,i*I,4)333)-§i*I*+§H*iHn,hi73H,H(i)8(H+J+H)P*(H*V)(J-r,§H)P*,H.i)H+H,i)V)(-H*i*I*H+i)I+H-H.I.H,H-i)I,4)333Ã+)-§iø7i(^*(iü7I,*h+hH+iDn,h*hilI+i)I,+hH+,hH+iô7H,c)(i)H+i´8W)(H,I,H+i*I+4)-+hH(H)8*J-i(p5.*h*h*hH-i')u,hH(P*(J+,hH(P*0J,H(P*,n50H+H,H-b((3H(P*0i)I.4)3H-i¨*n5*H-iÅ*s,hi73H-i)J+V)&+I,H(H+V)æ,8(I.H(H*8*J-i(p51H-i)J+i¸7V)(H(H+iø7V)(8(J/H(P*0J+s,hi73H+H,H.J,I.H(P*(m5(H.H(P*,s5.+hH,m5*H(P*(J.H+H.H+H/U((b((H(H(P*0i)J+^*0H,i)I,4(3(3H(H.^*03H-i¨*o5)33i(73(3(3-H,H+i)c)(H,i*I,H+i)I+4)33i)I-3H-3!2)0§K(i2J,L(H,H(^*(H,H*^*4H,i(^*0H,i(^*DH,j(_*<H,H)P*(^*,H,H+P*(^*8*h*h+hH,i)8(I3i§I**h*h*h*h*h*h*hH,i*8(6+(),03H,j(_*@i*I-H,P*<J.i,J(H,P*8J/s50H,H.i+J0^*<i¦I*H.H,P*4J1J.U(*H.U((J2i')o5/H.U()I.H,H(^*<H0H1U((H.i0J.i§i0i')o5/H/H.H2J*H(J.q50H,P*0J/H*I-H,P*(J0,hH,P*,H-q,hi)I-423+hH*m5+H/H0H(H1U((b((H/i)I/H(i)I(H*i)I*4(3(3H,H.^*<H,H-^*04*3iØ1U((5+i(I(i¨7i1^*(i$6iè1^*(i°7iè6^*(i¬7iÈ6^*(+hH(iÈ*n,hiÈ*I(+hH(i¨,n,hi¨,I(+hH(iØ,n,hiØ,I(+hH(iè,o,hH,i-H(i0c)(H(i*I(4)33iè1i1H,i-iÈ*8)Bi(I(+hH(ido,hH,i-H(i-c)(H(i*I(4)33iÈ6iè6H,i-iF8)BiØ1i)b((41-H,i-H(i/c)(H(i*I(4)3(3(-H,i-H(i1c)(H(i*I(4)3(3(-H,i-H(i0c)(H(i*I(4)3(3(3H,H/^*0H,H(^*<3i(I*4*3H,H,i¸)^*TH,H,iø-^*PH,H,iX^*LH,H,i(^*HH,i-8(I(H,i-8(I-i¥I*H,i,8(I.H(iErH-iEr5)H(i©*I1H-i)I0i(i;H.i,J(i(H(i(rCJ(J*H*i;sCI*i¨1I-H(I/+hH/,hH,i-H-V)(i)H,i+8(c)(H/i)I/H-i*I-H*i)I*4)-H(i)i¨1I/+hH(H*o,hH,i-H/V)(i)i(c)(H/i*I/H(i)I(4)33i¤I*H,iø-H,i¸)H,i-i;8)5+H0H1I2i(I-+hH-H2p,hH,H,iP8*J*i(p5-H*i7u,hH,i-H-i)H*c)(H-i)I-4*3i(I/i+I.i+I(*h*h*hH*i86*(*)3H-m,hi£I*403H-i)H,W)-I/i*I(4)3i3I.i/I(3H2H,H(8(H.J(H-J.p,hi¢I*4.3H,i-H-i)I*+hH(,hH*H/c)(H*i*I*H(i)I(4)-H.I-4+3(3(33H,W)1m,hiI*4,3H,iø-H,i¸)H,i-H18)J(,hi¡I*H(i(p5,H1H,V)ú-H,V)ø-o5,3H,i(H,iXH,i-H1i)H08)J(,hi I*H(i(p5,H0H,V)H,V)o5,3H,H,iPH,iH8+I*4+3(3(3H,i$6i¬78+I*3H*H3m5(3i)I-H*i(r5)3H)H,P*0^*(H+H,P*<^*(H*I-3H,i2L(H-33Á)+(i¨03b+(,(-(.(/(0(1(2(3(5(7(9(;(?(C(G(K(S([(c(k({(((«(Ë(ë((*)(iø03O)()()()(*(*(*(*(+(+(+(+(,(,(,(,(-(-(-(-(i¨13M8(9(:(((0(/(1(.(2(-(3(,(4(+(5(*(6()(7(T7*S7US0U `;a.getModule(a,H).then(s=>WebAssembly.instantiate(s,{})).then(({exports:s})=>{const i=new Map(Object.entries(s)),n=i.get("puff"),l=i.get("memory").buffer,c=new h(l),d=new DataView(l);let o=i.get("__heap_base");const f=e.length,u=o;o+=4,d.setInt32(u,f,!0);const P=o;o+=f,c.set(e,P);const m=o;o+=4,d.setInt32(m,c.byteLength-o,!0),n(o,m,P,u),t(c.slice(o,o+d.getInt32(m,!0)))})})}}}),Object.defineProperty(this,"wasm",{enumerable:!0,get:()=>this._wasm}),this.getOutputChannels=(e,t,H)=>{let s=[],i=0;for(;i<t;)s.push(e.slice(i*H,i++*H+H));return s},this.allocateTypedArray=(e,t,H=!0)=>{const s=this._wasm.malloc(t.BYTES_PER_ELEMENT*e);return H&&this._pointers.add(s),{ptr:s,len:e,buf:new t(this._wasm.HEAP,s,e)}},this.free=()=>{this._pointers.forEach(e=>{this._wasm.free(e)}),this._pointers.clear()},this.codeToString=e=>{const t=[],H=new Uint8Array(this._wasm.HEAP);for(let s=H[e];s!==0;s=H[++e])t.push(s);return String.fromCharCode.apply(null,t)},this.addError=(e,t,H,s,i,n)=>{e.push({message:t,frameLength:H,frameNumber:s,inputBytes:i,outputSamples:n})},this.instantiate=(e,t)=>(t&&a.setModule(e,t),this._wasm=new e(a).instantiate(),this._pointers=new Set,this._wasm.ready.then(()=>this))}var E=Worker;const V=A(E),v=()=>globalThis.Worker||V;class W extends v(){constructor(p,e,t,H){a.modules||new a;let s=a.modules.get(t);if(!s){let i="text/javascript",n,l=`'use strict';(${((c,d,o)=>{let f,u,P=new Promise(m=>{u=m});self.onmessage=({data:{id:m,command:r,data:I}})=>{let g=P,y={id:m},w;r==="init"?(Object.defineProperties(c,{WASMAudioDecoderCommon:{value:d},EmscriptenWASM:{value:o},module:{value:I.module},isWebWorker:{value:!0}}),f=new c(I.options),u()):r==="free"?f.free():r==="ready"?g=g.then(()=>f.ready):r==="reset"?g=g.then(()=>f.reset()):(Object.assign(y,f[r](Array.isArray(I)?I.map(J=>new Uint8Array(J)):new Uint8Array(I))),w=y.channelData?y.channelData.map(J=>J.buffer):[]),g.then(()=>self.postMessage(y,w))}}).toString()})(${t}, ${a}, ${H})`;try{n=typeof process.versions.node<"u"}catch{}s=n?`data:${i};base64,${Buffer.from(l).toString("base64")}`:URL.createObjectURL(new Blob([l],{type:i})),a.modules.set(t,s)}super(s,{name:e}),this._id=Number.MIN_SAFE_INTEGER,this._enqueuedOperations=new Map,this.onmessage=({data:i})=>{const{id:n,...l}=i;this._enqueuedOperations.get(n)(l),this._enqueuedOperations.delete(n)},new H(a).getModule().then(i=>{this.postToDecoder("init",{module:i,options:p})})}async postToDecoder(p,e){return new Promise(t=>{this.postMessage({command:p,id:this._id,data:e}),this._enqueuedOperations.set(this._id++,t)})}get ready(){return this.postToDecoder("ready")}async free(){await this.postToDecoder("free").finally(()=>{this.terminate()})}async reset(){await this.postToDecoder("reset")}}const U=(h,p)=>{Object.defineProperty(h,"name",{value:p})};export{a as W,W as a,U as b};
//# sourceMappingURL=utilities-C6FQu89x.js.map
